(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["userCollection"],{"16db":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",{staticClass:"pa-15"},[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-breadcrumbs",{attrs:{items:t.breadcrumbs,large:""}}),a("v-data-table",{attrs:{headers:t.headers,items:t.userCollect,"items-per-page":5},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-spacer"),a("v-dialog",{attrs:{"max-width":"40%",scrollable:""},model:{value:t.dialogOpen,callback:function(e){t.dialogOpen=e},expression:"dialogOpen"}},[a("v-card",{staticClass:"amber lighten-5 pa-5"},[a("v-card-title",{staticClass:"display-1 pa-12 text-center d-flex flex-column justify-center align-center"},[t._v(t._s(t.dialogItem.title))]),a("v-card-text",{staticClass:"d-flex flex-column"},[a("div",{staticClass:"text-h4"},[a("h5",{staticClass:"mb-6"},[t._v("基本資料")]),a("p",{staticClass:"text-body-1"},[t._v("所在地："+t._s(t.dialogItem.p_id?t.dialogItem.p_id.location.toString():""))]),a("p",{staticClass:"text-body-1"},[t._v("定位精度："+t._s(t.dialogItem.p_id?t.dialogItem.p_id.precision:""))]),a("p",{staticClass:"text-body-1"},[t._v("營運日期（起）："+t._s(t.dialogItem.p_id?t.dialogItem.p_id.datestart:""))]),a("p",{staticClass:"text-body-1"},[t._v("營運日期（迄）："+t._s(t.dialogItem.p_id?t.dialogItem.p_id.dateend:""))]),a("p",{staticClass:"text-body-1"},[t._v("可考之營運年代："+t._s(t.dialogItem.p_id?t.dialogItem.p_id.dateback:""))])]),a("div",{staticClass:"text-h4"},[a("h5",{staticClass:"mb-6"},[t._v("戲院建築")]),a("p",{staticClass:"text-body-1"},[t._v("建物描述："+t._s(t.dialogItem.p_id?t.dialogItem.p_id.description:""))]),a("p",{staticClass:"text-body-1"},[t._v("建物現況："+t._s(t.dialogItem.p_id?t.dialogItem.p_id.state:""))])]),a("div",{staticClass:"text-h4"},[a("h5",{staticClass:"mb-6"},[t._v("資料來源")]),a("p",{staticClass:"text-body-1"},[t._v(t._s(t.dialogItem.p_id?t.dialogItem.p_id.source.toString():""))])])]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"brown darken-1",outlined:"",text:""},on:{click:t.closeDialog}},[t._v("關閉視窗")]),a("v-spacer")],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var s=e.item,i=e.index;return[a("v-btn",{attrs:{icon:""},on:{click:function(e){t.openItem(s)}}},[a("v-icon",{attrs:{small:""}},[t._v(" mdi-book-open-variant ")])],1),a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.deleteCollect(s,i)}}},[a("v-icon",{attrs:{small:""}},[t._v(" mdi-trash-can ")])],1)]}}])})],1)],1)],1)},i=[],l=(a("c740"),a("d81d"),a("a434"),a("b0c0"),{data:function(){return{breadcrumbs:[{text:"我的收藏",disabled:!0,href:"breadcrumbs_dashboard"}],headers:[{text:"收藏戲院",align:"start",sortable:!1,value:"title"},{text:"操作",align:"center",sortable:!1,value:"actions"}],dialogOpen:!1,dialogItem:{},userCollect:[],collect:[]}},computed:{user:function(){return this.$store.state.user}},methods:{openItem:function(t){this.dialogItem=t,console.log(this.dialogItem),this.dialogOpen=!0},closeDialog:function(){var t=this;this.dialogOpen=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},deleteCollect:function(t){var e=this;console.log(t);var a=this.userCollect.findIndex((function(e){return e._id===t._id}));this.dialogItem&&this.axios.patch("https://theatermap.herokuapp.com/users/"+this.user.id+"/collection",{p_id:t.p_id._id}).then((function(t){t.data.success?(e.$swal({icon:"success",title:"刪除成功",text:t.data.message}),e.userCollect.splice(a,1)):e.$swal({icon:"error",title:"錯誤",text:t.data.message})}))}},mounted:function(){var t=this;this.axios.get("https://theatermap.herokuapp.com/users/"+this.user.id+"/collection").then((function(e){e.data.success?t.userCollect=e.data.result[0].collections.map((function(t){return t.title=t.p_id.name,t})):t.$swal({icon:"error",title:"錯誤",text:e.data.message})}))}}),o=l,r=a("2877"),d=a("6544"),c=a.n(d),n=a("2bc5"),u=a("8336"),p=a("b0af"),m=a("99d9"),b=a("62ad"),h=a("a523"),v=a("8fea"),g=a("169a"),_=a("132d"),f=a("0fd9"),x=a("2fa4"),C=Object(r["a"])(o,s,i,!1,null,null,null);e["default"]=C.exports;c()(C,{VBreadcrumbs:n["a"],VBtn:u["a"],VCard:p["a"],VCardActions:m["a"],VCardText:m["b"],VCardTitle:m["c"],VCol:b["a"],VContainer:h["a"],VDataTable:v["a"],VDialog:g["a"],VIcon:_["a"],VRow:f["a"],VSpacer:x["a"]})},"2bc5":function(t,e,a){"use strict";a("a15b");var s=a("5530"),i=(a("abd3"),a("ade3")),l=a("1c87"),o=a("58df"),r=Object(o["a"])(l["a"]).extend({name:"v-breadcrumbs-item",props:{activeClass:{type:String,default:"v-breadcrumbs__item--disabled"},ripple:{type:[Boolean,Object],default:!1}},computed:{classes:function(){return Object(i["a"])({"v-breadcrumbs__item":!0},this.activeClass,this.disabled)}},render:function(t){var e=this.generateRouteLink(),a=e.tag,i=e.data;return t("li",[t(a,Object(s["a"])(Object(s["a"])({},i),{},{attrs:Object(s["a"])(Object(s["a"])({},i.attrs),{},{"aria-current":this.isActive&&this.isLink?"page":void 0})}),this.$slots.default)])}}),d=a("80d2"),c=Object(d["i"])("v-breadcrumbs__divider","li"),n=a("7560");e["a"]=Object(o["a"])(n["a"]).extend({name:"v-breadcrumbs",props:{divider:{type:String,default:"/"},items:{type:Array,default:function(){return[]}},large:Boolean},computed:{classes:function(){return Object(s["a"])({"v-breadcrumbs--large":this.large},this.themeClasses)}},methods:{genDivider:function(){return this.$createElement(c,this.$slots.divider?this.$slots.divider:this.divider)},genItems:function(){for(var t=[],e=!!this.$scopedSlots.item,a=[],s=0;s<this.items.length;s++){var i=this.items[s];a.push(i.text),e?t.push(this.$scopedSlots.item({item:i})):t.push(this.$createElement(r,{key:a.join("."),props:i},[i.text])),s<this.items.length-1&&t.push(this.genDivider())}return t}},render:function(t){var e=this.$slots.default||this.genItems();return t("ul",{staticClass:"v-breadcrumbs",class:this.classes},e)}})},abd3:function(t,e,a){}}]);
//# sourceMappingURL=userCollection.e4fc29e1.js.map